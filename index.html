<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla Simple</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1><CENTER>PLAN MAESTRO DE PRODUCCION</CENTER></h1>

    <table>
        <thead>
            <tr>
                <th>CAPACIDAD</th>
                <th>MAQUINA 1</th>
                <th>MAQUINA 2</th>
                <th>MAQUINA 3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>UNIDADES/DÍA</td>
                <td><input id="unidades1" type="number" placeholder="Ingrese datos numéricos" /></td>
                <td><input id="unidades2" type="number" placeholder="Ingrese datos numéricos" /></td>
                <td><input id="unidades3" type="number" placeholder="Ingrese datos numéricos" /></td>
            </tr>
            <tr>
                <td>COSTO/UNIDAD</td>
                <td><input id="costos1" type="number" placeholder="Ingrese datos numéricos" /></td>
                <td><input id="costos2" type="number" placeholder="Ingrese datos numéricos" /></td>
                <td><input id="costos3" type="number" placeholder="Ingrese datos numéricos" /></td>
            </tr>
        </tbody>
    </table>

    <h2>Inputs Adicionales</h2>
    <div class="input-container">
        <label for="stockInicial">STOCK INICIAL:</label>
        <input type="number" id="stockInicial" placeholder="Ingrese datos numéricos" />

        <label for="stockSeguridad">STOCK DE SEGURIDAD:</label>
        <input type="number" id="stockSeguridad" placeholder="Ingrese datos numéricos" />

        <label for="costoUnitarioAlmacen">COSTO UNITARIO DE ALMACÉN:</label>
        <input type="number" id="costoUnitarioAlmacen" placeholder="Ingrese datos numéricos" />

        <label for="costoUnitarioRetraso">COSTO UNITARIO POR RETRASO:</label>
        <input type="number" id="costoUnitarioRetraso" placeholder="Ingrese datos numéricos" />
    </div>

    <h2>Nueva Tabla</h2>
    <table>
        <thead>
            <tr>
                <th>MES</th>
                <th>DIAS LABORALES</th>
                <th>DEMANDA</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Enero</td>
                <td><input id="dias1" type="number" placeholder="Días laborales" /></td>
                <td><input id="costo1" type="number" placeholder="Demanda" /></td>
            </tr>
            <tr>
                <td>Febrero</td>
                <td><input id="dias2" type="number" placeholder="Días laborales" /></td>
                <td><input id="costo2" type="number" placeholder="Demanda" /></td>
            </tr>
            <tr>
                <td>Marzo</td>
                <td><input id="dias3" type="number" placeholder="Días laborales" /></td>
                <td><input id="costo3" type="number" placeholder="Demanda" /></td>
            </tr>
            <tr>
                <td>Abril</td>
                <td><input id="dias4" type="number" placeholder="Días laborales" /></td>
                <td><input id="costo4" type="number" placeholder="Demanda" /></td>
            </tr>
            <tr>
                <td>Mayo</td>
                <td><input id="dias5" type="number" placeholder="Días laborales" /></td>
                <td><input id="costo5" type="number" placeholder="Demanda" /></td>
            </tr>
            <tr>
                <td>Junio</td>
                <td><input id="dias6" type="number" placeholder="Días laborales" /></td>
                <td><input id="costo6" type="number" placeholder="Demanda" /></td>
            </tr>
        </tbody>
    </table>

    <div class="button-container">
        <button onclick="calcularProduccionPromedio()">Produccion promedio igual a la media</button>
        <button onclick="calcularStockCero()">Stock 0</button>
        <button onclick="calcularStockSeguridad()">Stock de seguridad</button>
    </div>

    <h2>Resultados</h2>
    <table id="resultadosTabla">
        <thead>
            <tr>
                <th></th>
                <th colspan="3">Capacidad mensual</th>
                <th></th>
                <th></th>
                <th></th>
                <th colspan="3">Produccion mensual</th>
            </tr>
            <tr>
                <th>MES</th>
                <th>MAQUINA 1</th>
                <th>MAQUINA 2</th>
                <th>MAQUINA 3</th>
                <th>Capacidad Total</th>
                <th>Stock</th>
                <th>Demanda corregida</th>
                <th>Maquina 1</th>
                <th>Maquina 2</th>
                <th>Maquina 3</th>
                <th>Produccion total</th>
            </tr>
        </thead>
        <tbody>
            <!-- Los resultados se llenarán aquí -->
        </tbody>
    </table>

    <script>
        function calcularProduccionPromedio() {
            // Obtener los valores de los días y costos ingresados por el usuario
            var dias = [
                document.getElementById("dias1").value,
                document.getElementById("dias2").value,
                document.getElementById("dias3").value,
                document.getElementById("dias4").value,
                document.getElementById("dias5").value,
                document.getElementById("dias6").value
            ];

            // Validar que los días laborales estén entre 10 y 31
            for (var i = 0; i < dias.length; i++) {
                if (isNaN(dias[i]) || dias[i] < 10 || dias[i] > 31) {
                    alert("Ingrese días laborales válidos (entre 10 y 31) para el mes " + obtenerNombreMes(i + 1));
                    return; // Detener la ejecución si los días no son válidos
                }
            }

            var unidades = [
                document.getElementById("unidades1").value,
                document.getElementById("unidades2").value,
                document.getElementById("unidades3").value
            ];

            // Validar que todos los demás datos sean enteros positivos
            for (var i = 0; i < unidades.length; i++) {
                if (isNaN(unidades[i]) || unidades[i] < 0 || unidades[i] % 1 !== 0) {
                    alert("Ingrese valores válidos (enteros positivos) para las unidades de la máquina " + (i + 1));
                    return; // Detener la ejecución si los datos no son válidos
                }
            }

            // Calcular la producción media
            var sumatoriaDemanda = 0;
            var sumatoriaDias = 0;

            for (var i = 0; i < dias.length; i++) {
                sumatoriaDemanda += parseInt(document.getElementById("costo" + (i + 1)).value);
                sumatoriaDias += parseInt(dias[i]);
            }

            var produccionMedia = sumatoriaDemanda / sumatoriaDias;
            alert(produccionMedia);

            // Calcular la producción promedio y llenar la tabla de resultados
            var resultadosTabla = document.getElementById("resultadosTabla").getElementsByTagName('tbody')[0];
            resultadosTabla.innerHTML = ''; // Limpiar la tabla antes de llenarla nuevamente

            for (var i = 0; i < dias.length; i++) {
                var fila = resultadosTabla.insertRow(i);
                var mesCell = fila.insertCell(0);
                mesCell.innerHTML = obtenerNombreMes(i + 1);

                var capacidadTotal = 0; // Inicializar la capacidad total para cada mes

                // Calcular y llenar las celdas de producción para cada máquina
                for (var j = 1; j <= 3; j++) {
                    var produccion = dias[i] * unidades[j - 1];
                    capacidadTotal += produccion; // Acumular la producción de cada máquina

                    var produccionCell = fila.insertCell(j);
                    produccionCell.innerHTML = produccion;
                }

                // Agregar la capacidad total a la última celda de la fila
                var capacidadTotalCell = fila.insertCell(4);
                capacidadTotalCell.innerHTML = capacidadTotal;

                // Agregar la columna de stock de seguridad igual a 0 (quinta celda)
                var stockSeguridadCell = fila.insertCell(5);
                stockSeguridadCell.innerHTML = 0;

                // Agregar la columna de demanda corregida igual a la demanda (sexta celda)
                var demandaCorregidaCell = fila.insertCell(6);
                demandaCorregidaCell.innerHTML = document.getElementById("costo" + (i + 1)).value;

                // Agregar la columna de producción total (séptima celda) utilizando la fórmula produccion media * diasX
                var produccionTotalCell = fila.insertCell(7);
                produccionTotalCell.innerHTML = produccionMedia * dias[i];
            }
        }

        // Función auxiliar para obtener el nombre del mes
        function obtenerNombreMes(numeroMes) {
            var meses = [
                "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
            ];
            return meses[numeroMes - 1];
        }
    </script>
</body>

</html>
